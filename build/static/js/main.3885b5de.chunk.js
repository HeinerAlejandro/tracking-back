(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"h",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return w}),n.d(t,"j",function(){return f}),n.d(t,"i",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"b",function(){return y}),n.d(t,"k",function(){return E}),n.d(t,"g",function(){return O}),n.d(t,"u",function(){return S}),n.d(t,"r",function(){return k}),n.d(t,"v",function(){return _}),n.d(t,"s",function(){return x}),n.d(t,"m",function(){return L}),n.d(t,"n",function(){return C}),n.d(t,"l",function(){return R}),n.d(t,"p",function(){return F}),n.d(t,"o",function(){return D}),n.d(t,"x",function(){return N}),n.d(t,"w",function(){return A}),n.d(t,"t",function(){return V}),n.d(t,"q",function(){return T});n(64);var a=n(14),r=n(11),o=n.n(r),c=n(29),s=n(19),i=n(169),l=n.n(i),u=n(15),p=n(72),d=(n(39),"SET_USER_LOG"),m="SET_NULL_USER",f="SET_VISIBLE_RESET_PASSWORD",h="SET_VISIBLE_LOGIN",g="SET_REGISTERING",v="SET_AUTHENTICATING",b="SET_REGISTERED",y="SET_AUTHENTICATED",E="CONVERT_TOKEN_SUCCESS",O="SET_STEP",w="SENDING_EMAIL_RESET_PASSWORD",S=function(e){return{type:d,payload:e}},k=function(e){return{type:m,payload:e}},_=function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,r,s,i,l,p=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:null,p.length>1&&void 0!==p[1]&&p[1],console.log("en set userlog"),console.log(t),e.prev=4,n=localStorage.getItem("token"),a=localStorage.getItem("type"),r=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),s={method:"GET",headers:{Accept:"application/json",Authorization:"".concat(a," ").concat(r," ").concat(n)}},e.next=11,fetch("".concat(u.e,"/user"),s);case 11:if((i=e.sent).ok){e.next=14;break}throw u.d.True.LOGIN_OPERATION;case 14:return e.next=16,i.json();case 16:return l=e.sent,console.log("valor de la data de usuario"),console.log(l),(t=Object(c.a)({},t,l)).super_user=l.is_superuser,delete t.is_superuser,e.abrupt("return",t);case 25:throw e.prev=25,e.t0=e.catch(4),console.log(e.t0),e.t0;case 29:case"end":return e.stop()}},e,this,[[4,25]])}));return function(){return e.apply(this,arguments)}}(),j=function(e){return{type:w,payload:e}},x=function(e){return{type:O,payload:e}},I=function(e){return{type:v,payload:e}},T=function(e){return{type:y,payload:e}},P=function(e){return{type:g,payload:e}},N=function(e){return{type:f,payload:e}},A=function(e){return{type:h,payload:e}},C=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(I(!0)),t.prev=1,t.next=4,z(e.Zi.access_token);case 4:a=t.sent,V(a),localStorage.setItem("token","".concat(e.Zi.access_token)),localStorage.setItem("type","Bearer"),localStorage.setItem("backend","".concat(u.a.GOOGLE)),localStorage.setItem("data_user",e.profileObj),n(T(!0)),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),n(I(!1)),t.abrupt("return",!1);case 17:return n(I(!1)),t.abrupt("return",!0);case 19:case"end":return t.stop()}},t,this,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var r,c,s,i,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Headers).append("Content-Type","application/json"),r.append("Accept","application/json"),c={method:"POST",headers:r,mode:"cors",body:JSON.stringify(e)},n(I(!0)),t.prev=5,t.next=8,fetch("".concat(u.e,"/accounts/login/"),c);case 8:return s=t.sent,t.next=11,s.json();case 11:if(i=t.sent,console.log(i),s.ok){t.next=15;break}throw i;case 15:l=i.key,localStorage.setItem("token","".concat(l)),localStorage.setItem("type","Token"),localStorage.setItem("data_user",e),V(l,null),n(T(!0)),t.next=29;break;case 23:return t.prev=23,t.t0=t.catch(5),console.log(t.t0),a.a.error(t.t0.non_field_errors),n(I(!1)),t.abrupt("return",!1);case 29:return n(I(!1)),t.abrupt("return",!0);case 31:case"end":return t.stop()}},t,this,[[5,23]])}));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var r,c,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Headers).append("Content-Type","application/json"),t.prev=2,t.next=5,fetch("".concat(u.e,"/accounts/password/reset/confirm/"),{method:"POST",mode:"cors",headers:r,body:e});case 5:if((c=t.sent).ok){t.next=8;break}throw c;case 8:return t.next=10,c.json();case 10:s=t.sent,a.a.success(s.detail),t.next=21;break;case 14:return t.prev=14,t.t0=t.catch(2),t.t1=console,t.next=19,t.t0.json();case 19:t.t2=t.sent,t.t1.log.call(t.t1,t.t2);case 21:case"end":return t.stop()}},t,this,[[2,14]])}));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var r,c,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(j(!0)),(r=new Headers).append("Content-Type","application/json"),t.prev=3,t.next=6,fetch("".concat(u.e,"/accounts/password/reset/"),{method:"POST",mode:"cors",headers:r,body:e});case 6:if((c=t.sent).ok){t.next=9;break}throw c;case 9:return t.next=11,c.json();case 11:s=t.sent,a.a.success(s.detail),n(j(!1)),n(x(1)),t.next=25;break;case 17:return t.prev=17,t.t0=t.catch(3),n(j(!1)),t.t1=console,t.next=23,t.t0.json();case 23:t.t2=t.sent,t.t1.log.call(t.t1,t.t2);case 25:case"end":return t.stop()}},t,this,[[3,17]])}));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var r,c,s,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Headers).append("Content-Type","application/json"),r.append("Accept","application/json"),c={method:"POST",headers:r,mode:"cors",body:e},n(P(!0)),console.log("enviando formulario de registro"),t.prev=6,t.next=9,fetch("".concat(u.e,"/accounts/registration/"),c);case 9:return s=t.sent,t.next=12,s.json();case 12:if(i=t.sent,s.ok){t.next=15;break}throw i;case 15:a.a.success("se ha enviado un correo de verificacion a su correo electronico"),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(6),n(P(!1)),n({type:b,payload:!1}),Object(p.a)(t.t0,n,"error");case 23:case"end":return t.stop()}},t,this,[[6,18]])}));return function(e){return t.apply(this,arguments)}}()},V=function(e,t){if(Object.keys(e).length>1){var n=Math.round((new Date).getTime()/1e3)+e.expires_in;localStorage.setItem("access_token_converted",e.access_token),localStorage.setItem("refresh_token_converted",e.refresh_token),localStorage.setItem("access_token_expires_in",n)}else localStorage.setItem("access_token_converted",e);t&&Object(p.b)(t)},z=function(){var e=Object(s.a)(o.a.mark(function e(t){var n,a,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.a,console.log(t),n.set("grant_type","convert_token"),n.set("client_id",u.b),n.set("client_secret",u.c),n.set("backend",u.a.GOOGLE),n.set("token",t),a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:n},e.prev=8,e.next=11,fetch("".concat(u.e,"/auth/convert-token"),a);case 11:if((r=e.sent).ok){e.next=19;break}return e.t0=console,e.next=16,r.json();case 16:throw e.t1=e.sent,e.t0.log.call(e.t0,e.t1),u.d.True.LOGIN_OPERATION;case 19:return e.next=21,r.json();case 21:return c=e.sent,console.log("exitoso conversion"),e.abrupt("return",c);case 26:throw e.prev=26,e.t2=e.catch(8),console.log("en errode conver token"),e.t2;case 30:case"end":return e.stop()}},e,this,[[8,26]])}));return function(t){return e.apply(this,arguments)}}()},15:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s});var a=window.location.origin,r="jkMZV7VFMJgoL2dkAvBi6LeuPE6JAXKiehkggXSW",o="NmY1obFurKkolS0re5mrEDKrF0ipgxbZxWs6Q77aMTxIJsLAw4EFrChHkSpFX6TeH2YZubQc0qf1GH2KLce0S33wSyYGRbx0R4jLFzzNCVnU1tLxvamTeJtu70Hlxxhr",c={GOOGLE:"google-oauth2",FACEBOOK:"facebook-oauth2"},s={True:{LOGIN_OPERATION:"\xa1Su acceso se completo con exito!",REGISTER_OPERATION:"\xa1Sus datos se registraron con exito!, ahora verifique su cuenta a traves de su correo electronico"},False:{LOGIN_OPERATION:"Error al iniciar sesion, compruebe su conexion, o intentelo mas tarde",REGISTER_OPERATION:"Error al registrar los datos suministrados,  compruebe su conexion, o intentelo mas tarde"}}},197:function(e,t,n){e.exports=n(355)},202:function(e,t,n){},269:function(e,t,n){},285:function(e,t,n){},32:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"k",function(){return h}),n.d(t,"m",function(){return g}),n.d(t,"l",function(){return v}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return y}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return O}),n.d(t,"j",function(){return S}),n.d(t,"i",function(){return k});var a=n(11),r=n.n(a),o=(n(64),n(14)),c=n(19),s=n(36),i="ADD_DEVICE",l="REMOVE_ALL_DEVICES",u="SELECT_DEVICE",p="SET_FILTER_SEARCH_DEVICE",d="SET_VISIBLE_FORM",m="ADD_POSITION_DEVICE",f=function(e){return{type:i,payload:e}},h=function(){return{type:l}},g=function(e){return function(t){e.forEach(function(e){var n=e.serial;delete e.serial,t(f({serial:n,device:e}))})}},v=function(e){return{type:u,payload:e}},b=function(e){return{type:p,payload:e}},y=function(e){return{type:d,payload:e}},E=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,i,l,u,p,d,m,h;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("serial",e),c=new Headers,i=localStorage.getItem("token"),l=localStorage.getItem("type"),u=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),c.append("Authorization","".concat(l," ").concat(u," ").concat(i)),p={method:"post",mode:"cors",headers:c,body:a},t.prev=8,t.next=11,fetch(s.a,p);case 11:if((d=t.sent).ok){t.next=14;break}throw d;case 14:return console.log(d),t.next=17,d.json();case 17:m=t.sent,o.a.config({top:100}),o.a.success("dispositivo registrado"),h=m.serial,delete m.serial,n(f({serial:h,device:m})),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(8),o.a.error("No se pudo registrar el dispotivo");case 29:case"end":return t.stop()}},t,this,[[8,26]])}));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,i,l,u,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("OBTENIENDO DEL SERVER DEVICED"),e.prev=1,(n=new Headers).append("Accept","application/json"),a=localStorage.getItem("token"),c=localStorage.getItem("type"),i=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),n.append("Authorization","".concat(c," ").concat(i," ").concat(a)),l={method:"GET",mode:"cors",headers:n},e.next=11,fetch(s.a,l);case 11:if((u=e.sent).ok){e.next=14;break}throw u;case 14:return e.next=16,u.json();case 16:p=e.sent,t(g(p)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),o.a.error("Error al obtener los dispositivos");case 23:case"end":return e.stop()}},e,this,[[1,20]])}));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(t){var n=e[0].device;e.forEach(function(e){delete e.device,t(f({device:n,position:e}))})}},S=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,o,c,i,l,u,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("device",e),o=new Headers,c=localStorage.getItem("token"),i=localStorage.getItem("type"),l=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),o.append("Content-Type","application/json"),o.append("Authorization","".concat(i," ").concat(l," ").concat(c)),t.prev=8,t.next=11,fetch("".concat(s.a,"?last=True"),{method:"GET",headers:o,body:a});case 11:return u=t.sent,t.next=14,u.json();case 14:if(p=t.sent,u.ok){t.next=17;break}throw p;case 17:n((r={device:e,position:p.position},{type:m,payload:r})),t.next=23;break;case 20:throw t.prev=20,t.t0=t.catch(8),t.t0.detail;case 23:case"end":return t.stop()}var r},t,this,[[8,20]])}));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,o,c,i,l,u,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("init",e.init),a.append("final",e.final),o=new Headers,c=localStorage.getItem("token"),i=localStorage.getItem("type"),l=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),o.append("Content-Type","application/json"),o.append("Authorization","".concat(i," ").concat(l," ").concat(c)),t.prev=9,t.next=12,fetch("".concat(s.a,"/").concat(e.device,"/positions?init=").concat(e.init,"&final=").concat(e.final),{method:"GET",headers:o,body:a});case 12:return u=t.sent,t.next=15,u.json();case 15:if(p=t.sent,u.ok){t.next=18;break}throw p;case 18:n(w(p)),t.next=24;break;case 21:throw t.prev=21,t.t0=t.catch(9),t.t0.detail;case 24:case"end":return t.stop()}},t,this,[[9,21]])}));return function(e){return t.apply(this,arguments)}}()}},341:function(e,t,n){},352:function(e,t,n){},355:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(9),c=n.n(o),s=(n(202),n(46)),i=(n(64),n(14)),l=n(21),u=n(30),p=n(23),d=n(22),m=n(24),f=(n(269),n(181),n(136)),h=(n(135),n(62)),g=(n(60),n(13)),v=n(11),b=n.n(v),y=n(19),E=n(12),O=n(41),w=(n(61),n(25)),S=(n(278),n(180)),k=(n(101),n(38)),_=(n(79),n(31)),j=(n(285),_.a.Item);var x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){var a=JSON.stringify({username:n.props.form.getFieldValue("names"),email:n.props.form.getFieldValue("email"),password1:n.props.form.getFieldValue("password"),password2:n.props.form.getFieldValue("confirm")});console.log(a),n.props.initRegistration(a)}})},n.handleConfirmBlur=function(e){e.target.value},n.compareToFirstPassword=function(e,t,a){var r=n.props.form;t&&t!==r.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()},n.validateToNextPassword=function(e,t,a){var r=n.props.form;t&&r.validateFields(["confirm"],{force:!0}),a()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props.form.getFieldDecorator,n={wrapperCol:{xs:{span:10,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{onSubmit:this.handleSubmit,layout:"vertical",style:{display:this.props.visible_login?"none":"block"},className:"formr"},this.props.logo,r.a.createElement("h2",{style:{width:"100%",textAlign:"center"}},"\xa1Suscribete!"),r.a.createElement(j,n,t("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(k.a,{size:"large",placeholder:"correo",prefix:r.a.createElement(g.a,{type:"mail",style:{color:"gray"}})}))),r.a.createElement(j,n,t("names",{rules:[{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(k.a,{size:"large",prefix:r.a.createElement(g.a,{type:"smile",style:{color:"gray"}}),placeholder:"nombres"}))),r.a.createElement(j,n,t("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(k.a,{type:"password",size:"large",prefix:r.a.createElement(g.a,{type:"lock",style:{color:"gray"}}),placeholder:"contrase\xf1a"}))),r.a.createElement(j,n,t("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(k.a,{type:"password",size:"large",onBlur:this.handleConfirmBlur,prefix:r.a.createElement(g.a,{type:"lock",style:{color:"gray"}}),placeholder:"verificacion"}))),r.a.createElement(j,{wrapperCol:{xs:{span:16,offset:4},sm:{span:16,offset:4},lg:{span:16,offset:4}}},t("agreement",{valuePropName:"checked"})(r.a.createElement(S.a,null,"ya lei el ",r.a.createElement("a",{href:"#"},"acuerdo")))),r.a.createElement(j,n,r.a.createElement(w.a,{type:"primary",className:"button-login-register",loading:this.props.registering,disabled:(e=this.props.form.getFieldsError(),Object.keys(e).some(function(t){return e[t]})),htmlType:"submit"},"Registrese"))))}}]),t}(r.a.Component),I=_.a.create()(x),T=n(178),P=n.n(T),N=(n(341),function(e){var t=e.successProvider,n=e.successFailure,a=e.google_icon;return r.a.createElement("div",null,r.a.createElement(P.a,{clientId:"210792263208-5ph8ka5gth3dlh5bakt27c8mk3vusdqv.apps.googleusercontent.com",onSuccess:t,onFailure:n,icon:!1,className:"login-button login-button-google",redirectUri:"https://heiner.pythonanywhere.com/account"},r.a.createElement(g.a,{style:{width:"30px"},component:a}),r.a.createElement("span",null," Accede con google ")))}),A=(n(194),n(167)),C=(n(345),n(133));var R=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(E.a)(Object(E.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.form.getFieldValue,n="mail"===this.props.type?t("correo"):{uid:t("uuid"),token:t("token"),new_password1:t("contrase\xf1a"),new_password2:t("confirmacion")};this.props.handleFetch(n)}},{key:"render",value:function(){var e,t,n=this,a=this.props.form.getFieldDecorator,o={};return e=(o="mail"===this.props.type?{name:["correo"],message:"Porfavor Introduce tu correo electronico"}:{name:["uuid","token","contrase\xf1a","confirmacion"],message:"Porfavor Introduce tu codigo uuid"}).name.map(function(e){return r.a.createElement(_.a.Item,null,a(e,{rules:[{required:!0,message:o.message}]})(r.a.createElement(k.a,{type:"contrase\xf1a"===e||"confirmacion"===e?"password":"mail"===n.props.type?"email":"text",size:"large",prefix:r.a.createElement(g.a,{type:"mail"===n.props.type?"mail":"lock",style:{color:"gray"}}),placeholder:e})))}),r.a.createElement("div",{style:this.props.style?this.props.style:null},r.a.createElement("h3",{style:{marginBottom:"30px",width:"300px",textAlign:"center",marginLeft:"auto",marginRight:"auto"}},"Si ha olvidado su contrase\xf1a, \xa1no tiene porque preocuparse!"),r.a.createElement(_.a,{onSubmit:this.handleSubmit,name:"form"+o.name},e,r.a.createElement(_.a.Item,null,r.a.createElement(w.a,{type:"primary",className:"button-login-register",disabled:(t=this.props.form.getFieldsError(),Object.keys(t).some(function(e){return t[e]})),htmlType:"submit",loading:this.props.loading_send_email},"Enviar"))))}}]),t}(a.Component),F=_.a.create()(R),D=[{title:"Solicitud de clave de reseteo",description:"Se enviara un codigo uuid a su correo electronico",node:F},{title:"Reseteo de contrase\xf1a",description:"Use el codigo uuid enviado a su correo",node:F}],L=C.a.Step,V={marginTop:"30px"},z=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=D[this.props.current].node,t=r.a.createElement(w.a,{style:V,onClick:this.props.setNextStep},"siguiente"),n=r.a.createElement(w.a,{style:V,onClick:this.props.setPrevStep},"anterior");return r.a.createElement(A.a,{style:{textAlign:"center"},onCancel:this.props.onCancel,footer:null,visible:this.props.visible,centered:!0},r.a.createElement("div",{className:"content-step"},r.a.createElement(e,{key:0===this.props.current?"mail":"lockform",style:{marginTop:"40px"},type:0===this.props.current?"mail":"lock",handleFetch:this.props.sendingEmail,loading_send_email:this.props.loading_send_email})),r.a.createElement(C.a,{current:this.props.current},D.map(function(e){return r.a.createElement(L,{key:e.title,title:e.title,description:e.description})})),this.props.current<1&&t,this.props.current>0&&n)}}]),t}(a.Component),G=_.a.create()(z),U=n(10),H=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).nextStep=n.nextStep.bind(Object(E.a)(Object(E.a)(n))),n.prevStep=n.prevStep.bind(Object(E.a)(Object(E.a)(n))),n.onCancel=n.onCancel.bind(Object(E.a)(Object(E.a)(n))),n.fetchResetPasswordFirstStep=n.fetchResetPasswordFirstStep.bind(Object(E.a)(Object(E.a)(n))),n.fetchResetPasswordSecondStep=n.fetchResetPasswordSecondStep.bind(Object(E.a)(Object(E.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"nextStep",value:function(){this.props.setStep(1)}},{key:"prevStep",value:function(){this.props.setStep(-1)}},{key:"onCancel",value:function(){this.props.setVisibleResetPassword(!1)}},{key:"fetchResetPasswordFirstStep",value:function(e){console.log(e);var t="";t="string"===typeof e?{email:e}:e,this.props.sendEmailResetPassword(JSON.stringify(t))}},{key:"fetchResetPasswordSecondStep",value:function(e){this.props.sendUuidResetPassword(JSON.stringify(e))}},{key:"render",value:function(){return r.a.createElement(G,{onCancel:this.onCancel,visible:this.props.visible,loading_send_email:this.props.sending_email,resetPasswordUrls:this.props.resetPasswordUrls,setNextStep:this.nextStep,setPrevStep:this.prevStep,current:this.props.current,sendingEmail:0===this.props.current?this.fetchResetPasswordFirstStep:this.fetchResetPasswordSecondStep})}}]),t}(a.Component),B={setStep:U.s,setVisibleResetPassword:U.x,sendEmailResetPassword:U.o,sendUuidResetPassword:U.p},q=Object(O.b)(function(e){return{current:e.current,sending_email:e.sending_email}},B)(H);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var J=r.a.createElement("g",null),K=r.a.createElement("g",null),X=r.a.createElement("g",null),Z=r.a.createElement("g",null),W=r.a.createElement("g",null),Y=r.a.createElement("g",null),Q=r.a.createElement("g",null),$=r.a.createElement("g",null),ee=r.a.createElement("g",null),te=r.a.createElement("g",null),ne=r.a.createElement("g",null),ae=r.a.createElement("g",null),re=r.a.createElement("g",null),oe=r.a.createElement("g",null),ce=r.a.createElement("g",null),se=function(e){return r.a.createElement("svg",M({version:1.1,id:"Layer_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 458.246 458.246",style:{enableBackground:"new 0 0 458.246 458.246"},xmlSpace:"preserve"},e),r.a.createElement("g",null,r.a.createElement("path",{style:{fill:"#F34A38"},d:"M160.777,259.368h71.594c-12.567,35.53-46.603,61.004-86.45,60.71 c-48.349-0.357-88.327-39.035-90.204-87.349c-2.012-51.789,39.537-94.563,90.887-94.563c23.479,0,44.905,8.946,61.058,23.605 c3.826,3.473,9.65,3.495,13.413-0.047l26.296-24.749c4.112-3.871,4.127-10.408,0.027-14.292 c-25.617-24.269-59.981-39.396-97.876-40.136C68.696,80.969,0.567,147.238,0.004,228.078 c-0.568,81.447,65.285,147.649,146.6,147.649c78.199,0,142.081-61.229,146.36-138.358c0.114-0.967,0.189-33.648,0.189-33.648 H160.777c-5.426,0-9.824,4.398-9.824,9.824v35.999C150.953,254.97,155.352,259.368,160.777,259.368z"}),r.a.createElement("path",{style:{fill:"#F34A38"},d:"M414.464,206.99v-35.173c0-4.755-3.854-8.609-8.609-8.609h-29.604c-4.755,0-8.609,3.854-8.609,8.609 v35.173h-35.173c-4.755,0-8.609,3.854-8.609,8.609v29.604c0,4.755,3.854,8.609,8.609,8.609h35.173v35.173 c0,4.755,3.854,8.609,8.609,8.609h29.604c4.755,0,8.609-3.854,8.609-8.609v-35.173h35.173c4.755,0,8.609-3.854,8.609-8.609v-29.604 c0-4.755-3.854-8.609-8.609-8.609L414.464,206.99L414.464,206.99z"})),J,K,X,Z,W,Y,Q,$,ee,te,ne,ae,re,oe,ce)},ie=(n.p,_.a.Item),le=k.a.Group,ue=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){var a={email:n.props.form.getFieldValue("emailogin"),password:n.props.form.getFieldValue("passwordlogin")};n.props.handleSessionSubmit(a)}})},n.compareToFirstPassword=function(e,t,a){var r=n.props.form;t&&t!==r.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={wrapperCol:{lg:{span:20,offset:2},md:{span:20,offset:2},sm:{span:20,offset:2},xs:{span:20,offset:2}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{visible:this.props.visible_reset_password,resetPasswordUrls:this.props.resetPasswordUrls}),r.a.createElement(_.a,{onSubmit:this.handleSubmit,style:{display:this.props.visible_login?"block":"none",marginTop:"40vh"},name:"form_session"},this.props.logo,r.a.createElement("h2",{style:{width:"100%",textAlign:"center",marginTop:"-100px"}},"\xa1Inicia Sesion!"),r.a.createElement(le,{size:"large"},r.a.createElement(h.a,{span:10,offset:2},r.a.createElement(ie,null,e("emailogin",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(k.a,{size:"large",placeholder:"correo",prefix:r.a.createElement(g.a,{type:"mail",style:{color:"gray"}})})))),r.a.createElement(h.a,{span:10},r.a.createElement(ie,null,e("passwordlogin",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(k.a,{type:"password",size:"large",prefix:r.a.createElement(g.a,{type:"lock",style:{color:"gray"}}),placeholder:"contrase\xf1a"}))))),r.a.createElement("p",null,r.a.createElement("a",{onClick:this.props.resetPasswordOperation,style:{marginLeft:"50px",width:"100%"},href:"#x"},"\xbfse te olvido tu contrase\xf1a?")),r.a.createElement(ie,t,r.a.createElement(w.a,{type:"primary",className:"button-login-register",htmlType:"submit",loading:this.props.authenticating},"\xa1Conectate!")),r.a.createElement(ie,t,r.a.createElement(N,{successProvider:this.props.successProvider,successFailure:this.props.successFailure,google_icon:se}))))}}]),t}(r.a.Component),pe=_.a.create()(ue),de=n(15),me=n(390),fe=(n(352),n(39));function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ge=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035 c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719 c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z"}))),ve=r.a.createElement("g",null),be=r.a.createElement("g",null),ye=r.a.createElement("g",null),Ee=r.a.createElement("g",null),Oe=r.a.createElement("g",null),we=r.a.createElement("g",null),Se=r.a.createElement("g",null),ke=r.a.createElement("g",null),_e=r.a.createElement("g",null),je=r.a.createElement("g",null),xe=r.a.createElement("g",null),Ie=r.a.createElement("g",null),Te=r.a.createElement("g",null),Pe=r.a.createElement("g",null),Ne=r.a.createElement("g",null),Ae=function(e){return r.a.createElement("svg",he({version:1.1,id:"Layer_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},e),ge,ve,be,ye,Ee,Oe,we,Se,ke,_e,je,xe,Ie,Te,Pe,Ne)},Ce=(n.p,n(72)),Re=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).responseProviderSucces=n.responseProviderSucces.bind(Object(E.a)(Object(E.a)(n))),n.responseProviderFailure=n.responseProviderFailure.bind(Object(E.a)(Object(E.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(Object(E.a)(n))),n.handleOperation=n.handleOperation.bind(Object(E.a)(Object(E.a)(n))),n.resetPasswordOperation=n.resetPasswordOperation.bind(Object(E.a)(Object(E.a)(n))),n.handleSessionSubmit=n.handleSessionSubmit.bind(Object(E.a)(Object(E.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"responseProviderSucces",value:function(){var e=Object(y.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.initSocialAuthentication(t);case 2:e.sent?this.props.history.push(fe.a):i.a.error("Error al autenticar");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"responseProviderFailure",value:function(e){Object(Ce.b)({type:"error",message:de.d.False.LOGIN_OPERATION})}},{key:"handleSubmit",value:function(e){var t=document.forms.formulario_registro,n={name:t.name,email:t.email,password:t.password};this.props.initRegistration(n)}},{key:"handleSessionSubmit",value:function(){var e=Object(y.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.initAuthentication(t);case 2:e.sent?this.props.history.push(fe.a):i.a.error("Error al autenticar");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleOperation",value:function(){this.props.visible_login?this.props.setVisibleLogin(!1):this.props.setVisibleLogin(!0)}},{key:"resetPasswordOperation",value:function(){this.props.visible_reset_password?this.props.setVisibleResetPassword(!1):this.props.setVisibleResetPassword(!0)}},{key:"render",value:function(){var e=this,t=(this.props.message_operation,this.props.visible_login?"\xbfAun no tienes una ":"\xbfya tienes una ");return r.a.createElement("div",{className:"principal"},r.a.createElement("div",{className:"page-login"},r.a.createElement(f.a,{type:"flex",justify:"space-between"},r.a.createElement(h.a,{lg:18,md:16,sm:0,xs:0,className:"content-image"},r.a.createElement(g.a,{component:Ae,className:"logo-page-image logo-page-lr"}),r.a.createElement("div",{className:"text-loginpage"},r.a.createElement("h1",null,"Sientete poderoso"),r.a.createElement("h2",null,"Con nuestro sistema de localizacion")),r.a.createElement("div",{className:"content-buttons"},r.a.createElement("button",{onClick:function(){e.props.visible_login&&e.handleOperation(!1)},className:this.props.visible_login?"":"initial-state"},"Registrate"),r.a.createElement("button",{onClick:function(){e.props.visible_login||e.handleOperation(!0)},className:this.props.visible_login?"initial-state":""},"Logeate"))),r.a.createElement(h.a,{lg:6,md:8,sm:24,xs:24,className:"content-form"},r.a.createElement(I,{handleSubmit:this.handleSubmit,registering:this.props.is_registering,initRegistration:this.props.initRegistration,visible_login:this.props.visible_login,logo:r.a.createElement(g.a,{component:Ae,className:"logo-form logo-page-lr"})}),r.a.createElement(pe,{successProvider:this.responseProviderSucces,succesFailure:this.responseProviderFailure,visible_login:this.props.visible_login,visible_reset_password:this.props.visible_reset_password,resetPasswordOperation:this.resetPasswordOperation,resetPasswordUrls:["http://127.0.0.1/accounts/reset","http://127.0.0.1/accounts/resetpassword"],authenticating:this.props.is_authenticating,initAuthentication:this.props.initAuthentication,handleSessionSubmit:this.handleSessionSubmit,logo:r.a.createElement(g.a,{component:Ae,className:"logo-form logo-page-lr"})}),r.a.createElement("span",{style:{color:"white",marginLeft:"50px"}},t,r.a.createElement("button",{onClick:this.handleOperation,style:{background:"none",border:"none",color:"blue"}},"cuenta?"))))))}}]),t}(a.Component),Fe={initRegistration:U.m,setVisibleResetPassword:U.x,setVisibleLogin:U.w,initSocialAuthentication:U.n,initAuthentication:U.l},De=Object(O.b)(function(e){return{visible_reset_password:e.visible_reset_password,visible_login:e.visible_login,message_operation:e.message_operation,is_authenticating:e.authentication.is_authenticating,is_authenticated:e.authentication.is_authenticated,is_registering:e.authentication.is_registering,is_registered:e.registration.is_registered,token_data:e.authentication.acces_token,data_user:e.authentication.data_user}},Fe)(Object(me.a)(Re)),Le=n(502),Ve=n(504),ze=n(389),Ge=n(503),Ue=n(82),He=n(99),Be=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){if(n.props.authenticated||Object(fe.b)()){var e=localStorage.getItem("data_user"),t=Object(U.v)(e);s.a.dispatch(Object(Ue.b)()),t.then(function(e){s.a.dispatch(Object(U.u)(e)),s.a.dispatch(Object(U.q)(!0))}).catch(function(e){i.a.error("fallo al autenticar")})}},n.componentDidUpdate=function(){n.componentDidMount()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,null,r.a.createElement(Ve.a,null,r.a.createElement(ze.a,{path:"/account",render:function(e){return Object(fe.b)()?r.a.createElement(He.a,null):r.a.createElement(Ge.a,{to:"/"})}}),r.a.createElement(ze.a,{path:"/",exact:!0,render:function(e){return Object(fe.b)()?r.a.createElement(Ge.a,{to:"/account"}):r.a.createElement(De,null)}}))))}}]),t}(a.Component),qe=Object(O.b)(function(e){return{authenticated:e.authentication.is_authenticated}},null)(Be);c.a.render(r.a.createElement(O.a,{store:s.a},r.a.createElement(qe,null)),document.getElementById("root"))},36:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return l});var a=n(15),r="".concat(a.e,"/devices"),o="".concat(a.e,"/link_shop"),c="".concat(a.e,"/user/avatar"),s="".concat(a.e,"/accounts/password/change/"),i="".concat(a.e,"/user/names"),l="".concat(a.e,"/accounts/auth/revoke-token/")},39:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l});var a=n(389),r=n(503),o=n(1),c=n.n(o),s=n(99),i=n(390),l="/account/dashboard",u=function(){return!!localStorage.getItem("token")};Object(i.a)(function(e){e.history;return c.a.createElement(a.a,{render:function(e){return u()?c.a.createElement(s.a,null):c.a.createElement(r.a,{to:""})}})})},46:function(e,t,n){"use strict";var a=n(51),r=n(168),o=n(125),c=n.n(o),s=n(15),i=n(10),l=function(e){var t=e.dispatch;e.getStore;return function(e){return function(n){if("function"==typeof n){var a=localStorage.getItem("access_token_expires_in");if(a){var r=c()(a),o=c()(Date.now());if(o-r<=0)localStorage.removeItem("access_token_expires_in"),localStorage.removeItem("access_token_converted"),localStorage.removeItem("refresh_token_converted");else if(o-r<=2e3){var l=localStorage.getItem("refresh_token_converted"),u=new FormData;u.append("grant_type","refresh_token"),u.append("client_id",s.b),u.append("client_secret",s.c),u.append("refresh_token",l);var p=function(e){fetch("http://127.0.0.1:8000/auth/token",{method:"POST",headers:{accept:"application/json"},body:e}).then(function(e){return e.json()})}(u);t(Object(i.t)(p))}}}return e(n)}}},u=n(29),p={is_registering:!1,is_registered:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.f:return Object(u.a)({},e,{is_registering:t.payload});case i.e:return Object(u.a)({},e,{is_registered:t.payload});default:return e}},m={is_authenticating:!1,is_authenticated:!1,acces_token:null,data_user:{}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.b:return Object(u.a)({},e,{is_authenticated:t.payload});case i.c:return Object(u.a)({},e,{is_authenticating:t.payload});case i.h:return Object(u.a)({},e,{data_user:t.payload});case i.k:return Object(u.a)({},e,{acces_token:t.payload});default:return e}},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.i:return t.payload;default:return e}},g=n(70),v=n(32),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.a:return Object(u.a)({},e,Object(g.a)({},t.payload.serial,Object(u.a)({},t.payload.device,{status:"H"===t.payload.device.status?"ACTIVO":"INACTIVO"})));case v.c:return{};default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.d:return t.payload;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.j:return t.payload;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return t.payload;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.g:return e+t.payload;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.e:return t.payload;default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.f:return t.payload;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.h:return Object(u.a)({},e,t.payload);case i.d:return t.payload;default:return e}},j=n(82),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.a:return t.payload;default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.b:return Object(u.a)({},e,Object(g.a)({},t.device,t.position));default:return e}},T=Object(a.c)({data_user:_,current:w,visible_reset_password:E,sending_email:O,visible_login:h,registration:d,authentication:f,devices:b,device_selected:y,filter_search:S,visible_form_device:k,link:x,positions:I});n.d(t,"a",function(){return N});var P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d,N=Object(a.e)(T,P(Object(a.a)(r.a,l)))},72:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});n(64);var a=n(14),r=function(e){switch(e.type){case"error":a.a.error(e.message,5);break;default:a.a.success(e.message,5)}},o=function(e,t,n){var a="";for(var o in e)for(var c in e[o])a=o+":"+e[o][c],r({type:n,message:a})}},82:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"e",function(){return m}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return f});var a=n(11),r=n.n(a),o=n(19),c=(n(64),n(14)),s=n(36),i=localStorage.getItem("token"),l=localStorage.getItem("type"),u=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),p="SET_LINK_SHOP";c.a.config({top:100});var d=function(){return function(){var e=Object(o.a)(r.a.mark(function e(t){var n,a,o,p,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new Headers).append("Content-Type","application/json"),n.append("Accept","application/json"),n.append("Authorization","".concat(l," ").concat(u," ").concat(i)),console.log("".concat(l," ").concat(u," ").concat(i)),a={method:"get",mode:"cors",headers:n},e.next=9,fetch(s.b,a);case 9:if((o=e.sent).ok){e.next=12;break}throw o;case 12:return e.next=14,o.json();case 14:p=e.sent,d=p.link,t(g(d)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),c.a.error("Error al cargar el link de la tienda virtual");case 22:case"end":return e.stop()}},e,this,[[0,19]])}));return function(t){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){var a,o,p,d,m;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new Headers).append("Authorization","".concat(l," ").concat(u," ").concat(i)),a.append("Content-Type","application/json"),o={link:e},p={method:"POST",headers:a,body:JSON.stringify(o)},t.prev=5,t.next=8,fetch(s.b,p);case 8:if(d=t.sent,c.a.config({top:100}),d.ok){t.next=12;break}throw d;case 12:c.a.success("Link establecido con exito"),n(g({link:e})),t.next=23;break;case 16:return t.prev=16,t.t0=t.catch(5),t.next=20,t.t0.json();case 20:m=t.sent,console.log(m),c.a.error("Error al establecer el link de la tienda");case 23:case"end":return t.stop()}},t,this,[[5,16]])}));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){var a,o,p,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new Headers).append("Authorization","".concat(l," ").concat(u," ").concat(i)),a.append("Content-Type","application/json"),o=e,console.log(o),p={mode:"cors",method:"POST",headers:a,body:o},t.prev=6,t.next=9,fetch(s.e,p);case 9:if((d=t.sent).ok){t.next=12;break}throw d;case 12:return c.a.success("Nombres cambiados con exito"),t.abrupt("return",!0);case 16:return t.prev=16,t.t0=t.catch(6),c.a.error("Error al cambiar los nombres"),t.abrupt("return",!1);case 20:case"end":return t.stop()}},t,this,[[6,16]])}));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(o.a)(r.a.mark(function t(n){var a,o,p,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new Headers).append("Authorization","".concat(l," ").concat(u," ").concat(i)),a.append("Content-Type","application/json"),o={method:"POST",headers:a,body:e},t.prev=5,t.next=8,fetch(s.f,o);case 8:return p=t.sent,t.next=11,p.json();case 11:if(d=t.sent,p.ok){t.next=14;break}throw d;case 14:return c.a.success(d.detail),t.abrupt("return",!0);case 18:return t.prev=18,t.t0=t.catch(5),c.a.error(t.t0.detail),t.abrupt("return",!1);case 22:case"end":return t.stop()}},t,this,[[5,18]])}));return function(e){return t.apply(this,arguments)}}()},g=function(e){return{type:p,payload:e}}},99:function(e,t,n){"use strict";var a=n(21),r=n(23),o=n(22),c=n(24),s=n(1),i=n.n(s),l=n(41),u=n(10),p=n(32),d=n(494),m=(n(60),n(13)),f=n(30),h=n(12),g=n(390),v=n(504),b=n(389),y=n(503),E=n(134),O=n(15),w=n(36),S=n(46),k=n(93),_=[{path:"/account/dashboard",exact:!0,name:"Dashboard",component:i.a.lazy(function(){return Promise.all([n.e(0),n.e(10),n.e(5)]).then(n.bind(null,498))})},{path:"/account/settings",exact:!0,name:"Settings",component:i.a.lazy(function(){return n.e(6).then(n.bind(null,501))})},{path:"/account/profile",exact:!0,name:"Profile",component:i.a.lazy(function(){return Promise.all([n.e(0),n.e(9),n.e(7)]).then(n.bind(null,499))})}],j=n(39),x=i.a.lazy(function(){return n.e(2).then(n.bind(null,495))}),I=(i.a.lazy(function(){return n.e(3).then(n.bind(null,367))}),i.a.lazy(function(){return n.e(4).then(n.bind(null,496))})),T=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).loading=function(){return i.a.createElement(m.a,{type:"loading"})},n.redirectToSettigns=function(){n.props.history.push("/account/settigns")},n.redirectToProfile=function(){n.props.history.push("/account/profile")},n.signOut=n.signOut.bind(Object(h.a)(Object(h.a)(n))),n.redirectToSettigns=n.redirectToSettigns.bind(Object(h.a)(Object(h.a)(n))),n.redirectToProfile=n.redirectToProfile.bind(Object(h.a)(Object(h.a)(n))),n}return Object(c.a)(t,e),Object(f.a)(t,[{key:"signOut",value:function(e){e.preventDefault();var t=localStorage.getItem("token"),n=localStorage.getItem("type");localStorage.removeItem("token"),localStorage.removeItem("backend"),localStorage.removeItem("type"),localStorage.removeItem("access_token_converted"),localStorage.removeItem("data_user"),localStorage.removeItem("access_token_expires_in"),localStorage.removeItem("refresh_token_converted"),"Bearer"===n&&(localStorage.removeItem("backend"),fetch(w.c,{body:{client_id:O.b,client_secret:O.c,token:t}})),S.a.dispatch(this.props.setNullUser({})),S.a.dispatch(this.props.setAuthenticated(!1)),this.props.removeAllDevice(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;Object(j.b)();return i.a.createElement("div",{className:"app"},i.a.createElement(k.c,{fixed:!0},i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(I,{redirectSettigns:this.redirectToSettigns,redirectProfile:this.redirectToProfile,onLogout:function(t){return e.signOut(t)},data_user:this.props.data_user}))),i.a.createElement("div",{className:"app-body"},i.a.createElement("main",{className:"main"},i.a.createElement(k.b,{appRoutes:_}),i.a.createElement(E.g,{fluid:!0},i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(v.a,null,_.map(function(e,t){return e.component?i.a.createElement(b.a,{key:t,path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(j.b)()?i.a.createElement(e.component,t):i.a.createElement(y.a,{to:"/"})}}):null}),i.a.createElement(y.a,{from:"/account",to:"/account/dashboard"}))))),i.a.createElement(k.a,{fixed:!0},i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(x,null)))))}}]),t}(s.Component),P=Object(g.a)(T),N=function(e){function t(){var e,n;Object(a.a)(this,t);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];return(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).render=function(){return i.a.createElement(P,{setNullUser:n.props.setNullUser,data_user:n.props.data_user,removeAllDevice:n.props.removeAllDevice,setUser:n.props.setUser,setAuthenticated:n.props.setAuthenticated})},n}return Object(c.a)(t,e),t}(s.Component),A={removeAllDevice:p.k};t.a=Object(d.a)(Object(l.b)(function(e){return{setAuthenticated:u.q,setUser:u.u,data_user:e.data_user,setNullUser:u.r}},A)(N))}},[[197,11,8]]]);
//# sourceMappingURL=main.3885b5de.chunk.js.map