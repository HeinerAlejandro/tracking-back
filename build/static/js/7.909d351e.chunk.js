(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{495:function(e,t,a){"use strict";a.r(t);var r=a(21),n=a(30),s=a(24),l=a(22),o=a(23),i=a(1),c=a.n(i),p=a(40),u=a(130),m=(a(488),a(486)),d=(a(60),a(12)),f=(a(79),a(31)),g=a(43);f.a.Item;var h=localStorage.getItem("token"),b=localStorage.getItem("type"),y=null===localStorage.getItem("backend")?"":localStorage.getItem("backend"),E=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)}(e.file.originFileObj,function(e){a.props.setUser({imageUrl:e}),a.setState({loading:!1})}):a.setState({loading:!0})},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Agregue una foto de perfil"),c.a.createElement(u.c,null,c.a.createElement(m.a,{name:"avatar",action:g.c,onChange:this.handleChange,showUploadList:!1,listType:"picture-card",headers:{Authorization:"".concat(b," ").concat(y," ").concat(h)}},c.a.createElement("div",null,c.a.createElement(d.a,{type:this.state.loading?"loading":"plus"}),c.a.createElement("img",{src:this.props.image?this.props.image:"resources/user-not-found.png",style:{width:"75px"}})))))}}]),t}(i.Component),v=f.a.Item;var O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var r=JSON.stringify({new_password1:a.props.form.getFieldValue("n-password"),new_password2:a.props.form.getFieldValue("n-confirm"),old_password:a.props.form.getFieldValue("old_password")});a.props.reset_pass(r).then(function(e){return a.setState({loading:!1})})}})},a.compareToFirstPassword=function(e,t,r){var n=a.props.form;t&&t!==n.getFieldValue("n-password")?r("Las 2 contrase\xf1as son diferentes"):r()},a.validateToNextPassword=function(e,t,r){var n=a.props.form;t&&n.validateFields(["n-confirm"],{force:!0}),r()},a.state={loading:!1},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e,t=this.props.form.getFieldDecorator;return c.a.createElement(u.c,null,c.a.createElement(u.e,null,"Modificar Contrase\xf1a"),c.a.createElement(u.d,null,c.a.createElement(f.a,{onSubmit:this.handleSubmit,layout:"vertical",className:"formr"},c.a.createElement(v,null,t("n-password",{rules:[{required:!0,message:"debes ingresar una contrase\xf1a"},{validator:this.validateToNextPassword}]})(c.a.createElement(u.l,{type:"password",size:"large",prefix:c.a.createElement(d.a,{type:"lock",style:{color:"gray"}}),placeholder:"contrase\xf1a"}))),c.a.createElement(v,null,t("n-confirm",{rules:[{required:!0,message:"Confirma tu contrase\xf1a"},{validator:this.compareToFirstPassword}]})(c.a.createElement(u.l,{type:"password",size:"large",onBlur:this.handleConfirmBlur,prefix:c.a.createElement(d.a,{type:"lock",style:{color:"gray"}}),placeholder:"verificacion"}))),c.a.createElement(v,null,t("old_password",{rules:[{required:!0,message:"Introduce tu contrase\xf1a actual"}]})(c.a.createElement(u.l,{type:"password",size:"large",prefix:c.a.createElement(d.a,{type:"lock",style:{color:"gray"}}),placeholder:"contrase\xf1a actual"}))),c.a.createElement(v,null,c.a.createElement(u.b,{type:"primary",className:"button-login-register",loading:this.state.loading,disabled:(e=this.props.form.getFieldsError(),Object.keys(e).some(function(t){return e[t]})),htmlType:"submit"},"Registrese")))))}}]),t}(c.a.Component),j=f.a.create()(O),w=f.a.Item;var _=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var r=JSON.stringify({first_name:a.props.form.getFieldValue("first_name"),last_name:a.props.form.getFieldValue("last_name")});a.props.reset_names(r).then(function(e){return a.setState({loading:!1})})}})},a.state={loading:!1},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e,t=this.props.form.getFieldDecorator;return c.a.createElement(u.c,null,c.a.createElement(u.e,null,"Modificar Nombre"),c.a.createElement(u.d,null,c.a.createElement(f.a,{onSubmit:this.handleSubmit,layout:"horizontal",className:"formr"},c.a.createElement(w,null,t("first_name",{initialValue:this.props.fn,rules:[{required:!0,message:"debes ingresar tu primer nombre"}]})(c.a.createElement(u.l,{type:"text",size:"large",prefix:c.a.createElement(d.a,{type:"user",style:{color:"gray"}}),placeholder:"nombre"}))),c.a.createElement(w,null,t("last_name",{initialValue:this.props.ln,rules:[{required:!0,message:"debes ingresar tu apellido"}]})(c.a.createElement(u.l,{type:"text",size:"large",prefix:c.a.createElement(d.a,{type:"user",style:{color:"gray"}}),placeholder:"apellido"}))),c.a.createElement(w,null,c.a.createElement(u.b,{type:"primary",className:"button-login-register",loading:this.state.loading,disabled:(e=this.props.form.getFieldsError(),Object.keys(e).some(function(t){return e[t]})),htmlType:"submit"},"Cambiar")))))}}]),t}(c.a.Component),S=f.a.create()(_),F=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(u.s,{className:"justify-content-center"},c.a.createElement(u.f,{xs:"12",lg:"0"},c.a.createElement(E,{image:this.props.image,setUser:this.props.setUser}),c.a.createElement(S,{reset_names:this.props.reset_names,fn:this.props.fn,ln:this.props.ln}),c.a.createElement(j,{reset_pass:this.props.reset_pass}))))}}]),t}(i.Component),k=a(10),N=a(133),C=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement(F,{image:this.props.ImageUrl,setUser:this.props.setUser,reset_pass:this.props.resetPassword,reset_names:this.props.resetNames,fn:this.props.first_name,ln:this.props.last_name})}}]),t}(i.Component),U={setUser:k.s,resetPassword:N.d,resetNames:N.c};t.default=Object(p.b)(function(e){return{ImageUrl:e.data_user.imageUrl,first_name:e.data_user.first_name,last_name:e.data_user.last_name}},U)(C)}}]);
//# sourceMappingURL=7.909d351e.chunk.js.map